<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:s="http://jboss.com/products/seam/taglib"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:rich="http://richfaces.org/rich"
				xmlns:a="http://richfaces.org/a4j" template="layout/template.xhtml">

<ui:define name="body">

	<rich:panel>

		<div class="section">
			<!--<span class="errors">
					<h:messages id="messages" globalOnly="true" />
				</span>-->

			<h1><h:outputText value="#{messages['salesmen.BasicSearch.BasicSearch']}"/></h1>

			<h:form id="searchCriteria">
				<fieldset>
					<h:inputText id="searchTerm"
								value="#{basicSearch.searchTerm}" style="width: 250px;">
						<a:support id="onkeyup" event="onkeyup"
								actionListener="#{basicSearch.find}" reRender="results"/>
					</h:inputText>
					<!--<h:selectOneMenu id="entityType" value="#{basicSearch.entityType}">
						<f:selectItem id="Auction" itemLabel="#{messages['salesmen.General.Auction']}" itemValue="Auction"/>
						<f:selectItem id="User" itemLabel="#{messages['salesmen.General.User']}" itemValue="User"/>
					</h:selectOneMenu>-->
					&#160;
					<a:commandButton id="findEntities" value="#{messages['salesmen.BasicSearch.Find']}"
									action="#{basicSearch.find}" reRender="results"/>
					&#160;
					<a:status id="status">
						<f:facet id="StartStatus" name="start">
							<h:graphicImage id="SpinnerGif" value="/img/ajax-loader.gif"/>
						</f:facet>
					</a:status>
					<br/>
				</fieldset>
			</h:form>
		</div>

		<br/>

        <a:outputPanel id="results">
            <fieldset id="typeLinks" style="display:inline-block;vertical-align:top;height:285px;width:60px">
                <legend>#{messages['salesmen.BasicSearch.types']}</legend>
                <strong><a:commandLink id="auctionsLink" action="#{basicSearch.setEntityTypeAuction}"
                               value="#{messages['salesmen.General.Auction'].concat(' (').concat(auctions.rowCount).concat(')')}"
                               ajaxSingle="true"
                               reRender="searchResults">
                </a:commandLink></strong>
                <br/>
                <strong><a:commandLink id="usersLink" action="#{basicSearch.setEntityTypeUser}"
                               value="#{messages['salesmen.General.User'].concat(' (').concat(users.rowCount).concat(')')}"
                               ajaxSingle="true"
                               reRender="searchResults">
                </a:commandLink></strong>
                <br/>
            </fieldset>


            <a:outputPanel id="searchResults" style="display:inline-block;">
                <div class="section">
                    <s:div rendered="#{basicSearch.entityTypeUser()}">
                        <h:outputText id="NoUsersFoundMessage"
                                   value="No Users Found"
                                rendered="#{users != null and users.rowCount==0}"/>
                        <h:dataTable id="users" value="#{users}" var="u"
                                    rendered="#{users.rowCount>0}">
                            <h:column id="ScreenNameColumn">
                                <f:facet id="ScreenNameFacet" name="header"><h:outputText value="#{messages['salesmen.User.ScreenName']}"/></f:facet>
                                <s:link id="userLink"
                                     value="#{u.screenName}"
                               propagation="none"
                                      view="/user.xhtml">
                                    <f:param name="userId"
                                        value="#{u.userId}"/>
                                </s:link>
                            </h:column>
                            <h:column id="FirstNameColumn">
                                <f:facet id="FirstNameFacet" name="header"><h:outputText value="#{messages['salesmen.User.FirstName']}"/></f:facet>
                                #{u.firstName}
                            </h:column>
                            <h:column id="LastNameColumn">
                                <f:facet id="LastNameFacet" name="header"><h:outputText value="#{messages['salesmen.User.LastName']}"/></f:facet>
                                #{u.lastName}
                            </h:column>
                        </h:dataTable>
                    </s:div>
                    <s:div rendered="#{basicSearch.entityTypeAuction()}">
                        <h:outputText id="NoAuctionsFoundMessage"
                                       value="No Auctions Found"
                                    rendered="#{auctions != null and auctions.rowCount==0}"/>
                        <s:div rendered="#{auctions.rowCount>0}">
                            <ui:include src="/auctionList.xhtml"/>
                        </s:div>
                    </s:div>
                </div>
            </a:outputPanel>
        </a:outputPanel>


	</rich:panel>

</ui:define>
</ui:composition>
