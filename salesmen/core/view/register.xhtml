<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
		xmlns="http://www.w3.org/1999/xhtml"
		xmlns:s="http://jboss.com/products/seam/taglib"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:rich="http://richfaces.org/rich"
		xmlns:a="http://richfaces.org/a4j"
		template="layout/template.xhtml">

<ui:define name="body">

    <h:form id="register">

        <rich:panel>
            <f:facet name="header">Register - Step 1</f:facet>

            <p>Please fill in the following information</p>
            <s:validateAll>

            <h:panelGrid columns="3" rowClasses="prop" columnClasses="name,value">

                <h:outputLabel for="username"><b>#{messages['salesmen.UserAccount.Username']}</b></h:outputLabel>
                <a:region id="usernameRegion">
                    <h:inputText id="username" value="#{registerUserAccount.username}" required="true">
                        <a:support event="onblur"
                                   action="#{registerUserAccount.verifyUsername()}"
                                   reRender="usernameMessage"
                                   ajaxSingle="true"
                                   limitToList="true" />
                    </h:inputText>
                </a:region>
                <a:outputPanel for="username" id="usernameMessage">
                    <a:status for="usernameRegion">
                        <f:facet name="start">
                            <h:graphicImage value="/img/ajax-loader.gif"/>
                        </f:facet>
                    </a:status>
                    <rich:message for="username" >
                        <f:facet name="errorMarker">
                            <h:graphicImage url="/img/msgerror.png"/>
                        </f:facet>
                        <f:facet name="infoMarker">
                            <h:graphicImage url="/img/true.png"/>
                        </f:facet>
                    </rich:message>
                </a:outputPanel>

                
                <h:outputLabel for="email"><b>#{messages['salesmen.User.Email']}</b></h:outputLabel>
                <a:region id="emailRegion">
                    <h:inputText id="email" value="#{registerUserAccount.user.email}" required="true">
                        <a:support event="onblur"
                                   reRender="emailMessage"
                                   ajaxSingle="true"
                                   limitToList="true" />
                    </h:inputText>
                </a:region>
                <a:outputPanel id="emailMessage">
                    <a:status for="emailRegion">
                        <f:facet name="start">
                            <h:graphicImage value="/img/ajax-loader.gif"/>
                        </f:facet>
                    </a:status>
                    <rich:message for="email">
                        <f:facet name="errorMarker">
                            <h:graphicImage url="/img/msgerror.png"/>
                        </f:facet>
                    </rich:message>
                </a:outputPanel>


                <h:outputLabel for="password"><b>#{messages['salesmen.UserAccount.Password']}</b></h:outputLabel>
                <h:inputSecret id="password" value="#{registerUserAccount.password}" required="true">
                    <a:support event="onblur"
                               reRender="passwordMessage"
                               ajaxSingle="true"
                               limitToList="true" />
                </h:inputSecret>
                <a:outputPanel for="password" id="passwordMessage">
                    <rich:message for="password">
                        <f:facet name="errorMarker">
                            <h:graphicImage url="/img/msgerror.png"/>
                        </f:facet>
                    </rich:message></a:outputPanel>


                <h:outputLabel for="passwordConfirmation"><b>#{messages['salesmen.UserAccount.Password']}</b></h:outputLabel>
                <a:region id="passwordConfirmationRegion">
                    <h:inputSecret id="passwordConfirmation" value="#{registerUserAccount.passwordConfirmation}" required="true">
                        <a:support event="onblur"
                                   action="#{registerUserAccount.verifyPassword()}"
                                   reRender="passwordConfirmationMessage"
                                   ajaxSingle="true"
                                   limitToList="true" />
                    </h:inputSecret>
                </a:region>
                <a:outputPanel for="passwordConfirmation" id="passwordConfirmationMessage">
                    <a:status for="passwordConfirmationRegion">
                        <f:facet name="start">
                            <h:graphicImage value="/img/ajax-loader.gif"/>
                        </f:facet>
                    </a:status>
                    <rich:message for="passwordConfirmation">
                        <f:facet name="errorMarker">
                            <h:graphicImage url="/img/msgerror.png"/>
                        </f:facet>
                        <f:facet name="infoMarker">
                            <h:graphicImage url="/img/true.png"/>
                        </f:facet>
                    </rich:message>
                </a:outputPanel>
            </h:panelGrid>
            </s:validateAll>
            <br/>

            <div class="actionButtons">

                <h:commandButton id="submit" value="Next"
                                 action="#{registerUserAccount.next}"/>
            </div>

        </rich:panel>
    </h:form>


</ui:define>
</ui:composition>